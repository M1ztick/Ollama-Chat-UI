/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var e={20:(e,t,n)=>{var r=n(594),a=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,l={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!i.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===l[r]&&(l[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:l,_owner:s.current}}t.jsx=l,t.jsxs=l},162:(e,t,n)=>{var r=n(594),a=n(888),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=a.useSyncExternalStore,i=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var d=i(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=c(function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==a&&f.hasValue){var t=f.value;if(a(t,e))return i=t}return i=e}if(t=i,o(s,e))return t;var n=r(e);return void 0!==a&&a(t,n)?(s=e,t):(s=e,i=n)}var s,i,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,a]);var p=s(e,d[0],d[1]);return l(function(){f.hasValue=!0,f.value=p},[p]),u(p),p}},206:e=>{e.exports=ReactDOM},242:(e,t,n)=>{e.exports=n(162)},338:(e,t,n)=>{var r=n(206);t.H=r.createRoot,r.hydrateRoot},493:(e,t,n)=>{var r=n(594),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,s=r.useEffect,i=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),a=r[0].inst,u=r[1];return i(function(){a.value=n,a.getSnapshot=t,c(a)&&u({inst:a})},[e,n,t]),s(function(){return c(a)&&u({inst:a}),e(function(){c(a)&&u({inst:a})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},594:e=>{e.exports=React},848:(e,t,n)=>{e.exports=n(20)},888:(e,t,n)=>{e.exports=n(493)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}var r=n(848),a=n(338),o=n(594);const s=e=>{let t;const n=new Set,r=(e,r)=>{const a="function"==typeof e?e(t):e;if(!Object.is(a,t)){const e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),n.forEach(n=>n(t,e))}},a=()=>t,o={setState:r,getState:a,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},s=t=e(r,a,o);return o};var i=n(242);const{useDebugValue:l}=o,{useSyncExternalStoreWithSelector:c}=i;let u=!1;const d=e=>e,f=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?(e=>e?s(e):s)(e):e,n=(e,n)=>function(e,t=d,n){n&&!u&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u=!0);const r=c(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return l(r),r}(t,e,n);return Object.assign(n,t),n};var p,h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},h.apply(this,arguments)},v=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},b=(p=function(e,t){return{messages:[],isOpen:!1,isLoading:!1,selectedModel:"llama3.2",availableModels:["llama3.2"],addMessage:function(t){var n=h(h({},t),{id:crypto.randomUUID()});e(function(e){return{messages:v(v([],e.messages,!0),[n],!1)}})},toggleChat:function(){e(function(e){return{isOpen:!e.isOpen}})},setLoading:function(t){e({isLoading:t})},setSelectedModel:function(t){e({selectedModel:t})},setAvailableModels:function(t){e({availableModels:t})},clearMessages:function(){e({messages:[]})}}})?f(p):f,y=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})},g=function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},m=new(function(){function e(){var e,t;this.ajaxUrl=(null===(e=window.ocwData)||void 0===e?void 0:e.ajaxUrl)||"/wp-admin/admin-ajax.php",this.nonce=(null===(t=window.ocwData)||void 0===t?void 0:t.nonce)||""}return e.prototype.proxyRequest=function(e,t){return y(this,void 0,void 0,function(){var n,r,a;return g(this,function(o){switch(o.label){case 0:return(n=new FormData).append("action","ocw_proxy_ollama"),n.append("nonce",this.nonce),n.append("endpoint",e),n.append("data",JSON.stringify(t)),[4,fetch(this.ajaxUrl,{method:"POST",body:n})];case 1:if(!(r=o.sent()).ok)throw new Error("HTTP error! status: ".concat(r.status));return[4,r.json()];case 2:if(!(a=o.sent()).success)throw new Error(a.data||"Request failed");return[2,JSON.parse(a.data)]}})})},e.prototype.getModels=function(){return y(this,void 0,void 0,function(){var e,t,n;return g(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.proxyRequest("tags",{})];case 1:return e=r.sent(),[2,(null===(n=e.models)||void 0===n?void 0:n.map(function(e){return e.name}))||[]];case 2:return t=r.sent(),console.error("Failed to fetch models:",t),[2,["llama3.2"]];case 3:return[2]}})})},e.prototype.sendMessage=function(e,t){return y(this,void 0,void 0,function(){var n;return g(this,function(r){return n={model:e,messages:t,stream:!0},[2,this.streamRequest("chat",n)]})})},e.prototype.streamRequest=function(e,t){return y(this,void 0,void 0,function(){var n,r;return g(this,function(a){switch(a.label){case 0:return(n=new FormData).append("action","ocw_proxy_ollama"),n.append("nonce",this.nonce),n.append("endpoint",e),n.append("data",JSON.stringify(t)),[4,fetch(this.ajaxUrl,{method:"POST",body:n})];case 1:if(!(r=a.sent()).ok)throw new Error("HTTP error! status: ".concat(r.status));return[2,new ReadableStream({start:function(e){var t,n=null===(t=r.body)||void 0===t?void 0:t.getReader();if(n)return function t(){return n.read().then(function(n){var r=n.done,a=n.value;if(!r)return e.enqueue(a),t();e.close()})}();e.close()}})]}})})},e}()),x=function(){return x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},x.apply(this,arguments)},w=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},j=function(){var e=b(),t=e.messages,n=e.isOpen,a=e.isLoading,s=e.selectedModel,i=e.availableModels,l=e.addMessage,c=e.toggleChat,u=e.setLoading,d=e.setSelectedModel,f=e.setAvailableModels,p=e.clearMessages,h=(0,o.useRef)(null),v=(0,o.useRef)(null);(0,o.useEffect)(function(){m.getModels().then(f)},[f]),(0,o.useEffect)(function(){var e;(e=h.current)&&(e.scrollTop=e.scrollHeight)},[t]);var y=function(e){return n=void 0,r=void 0,i=function(){var n,r,o,i,c,d,f,p,h,v,y,g,j,S,E,O,N,D,M;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,function(R){switch(R.label){case 0:if(!e.trim()||a)return[2];l({role:"user",content:e,timestamp:new Date}),u(!0),R.label=1;case 1:return R.trys.push([1,6,,7]),n=w(w([{role:"system",content:"You are RebelDev AI, a sarcastic but helpful AI assistant for ".concat((null===(D=window.ocwData)||void 0===D?void 0:D.siteName)||"this website",". You have a witty, slightly rebellious personality but you're ultimately helpful and knowledgeable. Keep responses concise and engaging.")}],t.map(function(e){return{role:e.role,content:e.content}}),!0),[{role:"user",content:e}],!1),[4,m.sendMessage(s,n)];case 2:r=R.sent(),o=r.getReader(),i="",c=new Date,l({role:"assistant",content:"",timestamp:c}),R.label=3;case 3:return[4,o.read()];case 4:if(d=R.sent(),f=d.done,p=d.value,f)return[3,5];for(h=(new TextDecoder).decode(p),v=h.split("\n").filter(function(e){return e.trim()}),y=0,g=v;y<g.length;y++){j=g[y];try{S=JSON.parse(j),(null===(M=S.message)||void 0===M?void 0:M.content)&&(i+=S.message.content,E=b.getState().messages,"assistant"===(null==(O=E[E.length-1])?void 0:O.role)&&b.setState({messages:w(w([],E.slice(0,-1),!0),[x(x({},O),{content:i})],!1)}))}catch(e){}}return[3,3];case 5:return[3,7];case 6:return N=R.sent(),console.error("Chat error:",N),l({role:"assistant",content:"Sorry, I'm having some technical difficulties. Try again in a moment! ðŸ¤–",timestamp:new Date}),[3,7];case 7:return u(!1),[2]}})},new((o=void 0)||(o=Promise))(function(e,t){function a(e){try{l(i.next(e))}catch(e){t(e)}}function s(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o(function(e){e(n)})).then(a,s)}l((i=i.apply(n,r||[])).next())});var n,r,o,i};return n?(0,r.jsxs)("div",{className:"w-80 h-96 bg-white rounded-lg shadow-xl border border-gray-200 flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-blue-600 text-white rounded-t-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),(0,r.jsx)("span",{className:"font-semibold",children:"RebelDev AI"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("select",{value:s,onChange:function(e){return d(e.target.value)},className:"text-sm bg-blue-700 text-white border border-blue-500 rounded px-2 py-1",children:i.map(function(e){return(0,r.jsx)("option",{value:e,children:e},e)})}),(0,r.jsx)("button",{onClick:p,className:"p-1 hover:bg-blue-700 rounded",title:"Clear chat",children:(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("path",{d:"M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14z"})})}),(0,r.jsx)("button",{onClick:c,className:"p-1 hover:bg-blue-700 rounded","aria-label":"Close chat",children:(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("path",{d:"M18 6L6 18M6 6l12 12"})})})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[0===t.length&&(0,r.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,r.jsx)("p",{className:"text-lg mb-2",children:"ðŸ‘‹ Hey there!"}),(0,r.jsx)("p",{className:"text-sm",children:"I'm RebelDev AI. What can I help you with today?"})]}),t.map(function(e){return(0,r.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"max-w-xs px-3 py-2 rounded-lg text-sm ".concat("user"===e.role?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),children:[(0,r.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}),(0,r.jsx)("p",{className:"text-xs mt-1 opacity-70 ".concat("user"===e.role?"text-blue-100":"text-gray-500"),children:(t=e.timestamp,new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(t))})]})},e.id);var t}),a&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsx)("div",{className:"bg-gray-100 px-3 py-2 rounded-lg",children:(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,r.jsx)("div",{ref:h})]}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget).get("message");t.trim()&&(y(t),e.currentTarget.reset())},className:"flex space-x-2",children:[(0,r.jsx)("textarea",{ref:v,name:"message",placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:1,disabled:a,onKeyDown:function(e){if("Enter"===e.key&&!e.shiftKey){e.preventDefault();var t=e.currentTarget.form;if(t){var n=new FormData(t).get("message");n.trim()&&(y(n),t.reset())}}}}),(0,r.jsx)("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("path",{d:"M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13"})})})]})})]}):(0,r.jsx)("button",{onClick:c,className:"w-16 h-16 bg-blue-600 hover:bg-blue-700 rounded-full shadow-lg flex items-center justify-center text-white transition-all duration-200 hover:scale-105","aria-label":"Open chat",children:(0,r.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.3596 22 8.82922 21.6231 7.5 20.9556L2 22L3.04445 16.5C2.37688 15.1708 2 13.6404 2 12C2 6.47715 6.47715 2 12 2Z",fill:"currentColor"})})})};document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("ollama-chat-widget-root");e&&(0,a.H)(e).render((0,r.jsx)(j,{}))})})();